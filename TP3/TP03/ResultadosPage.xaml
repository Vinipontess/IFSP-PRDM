<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TP03.ResultadosPage"
             Title="Detalhes do Rastreamento"
             BackgroundColor="{StaticResource FundoAzulClaro}">

    <ContentPage.Resources>
        <ResourceDictionary Source="Styles.xaml"/>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Spacing="15" 
                             Padding="15">

            <Label Text="Resultado do Rastreamento"
                   Style="{StaticResource TitleLabelStyle}"
                   Margin="0, 10, 0, 10"/>

            <Frame Style="{StaticResource CardStyle}">
                <VerticalStackLayout Spacing="10">

                    <HorizontalStackLayout Spacing="5">
                        <Label Text="ID do Pacote:" 
                               Style="{StaticResource BoldLabelStyle}"
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                        <Label Text="{Binding Pacote.PacoteId}"
                               Style="{StaticResource BoldLabelStyle}"
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="5">
                        <Label Text="Status:" 
                               Style="{StaticResource BoldLabelStyle}"
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                        <Label Text="{Binding Pacote.Status}"
                               Style="{StaticResource BoldLabelStyle}"
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="5">
                        <Label Text="Data de Envio:" 
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                        <Label Text="{Binding Pacote.DataEnvio}"
                               Style="{StaticResource BoldLabelStyle}"
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="5">
                        <Label Text="Entrega Prevista:" 
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                        <Label Text="{Binding Pacote.DataPrevistaEntrega}"
                               Style="{StaticResource BoldLabelStyle}"
                               TextColor="{StaticResource TextoAzulMarinho}"/>
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <Frame Style="{StaticResource CardStyle}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="HistÃ³rico de Eventos"
                           Style="{StaticResource SectionTitleLabelStyle}"
                           HorizontalOptions="Start"/>

                    <ListView ItemsSource="{Binding Pacote.HistoricoEventos}"
                              HasUnevenRows="True"
                              SeparatorVisibility="None">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <VerticalStackLayout Padding="5, 10, 5, 0">
                                        <Label Text="{Binding .}" 
                                               TextColor="{StaticResource TextoAzulMarinho}"/>
                                    </VerticalStackLayout>
                                </ViewCell>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </VerticalStackLayout>
            </Frame>

            <Button Text="Voltar"
                    Clicked="OnBackClicked"
                    Style="{StaticResource ButtonStyle}"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>